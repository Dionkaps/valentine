<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ’œ A Special Message for Anastasia ğŸ’œ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@300;400;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="particles"></div>

    <!-- Progress Bar -->
    <div class="progress-container" id="progress-container">
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
        <span class="progress-text" id="progress-text">1/8</span>
    </div>

    <!-- STAGE 0: Welcome -->
    <section id="stage-welcome" class="stage active">
        <div class="stage-content">
            <div class="lock-icon">ğŸ”’</div>
            <h1>A Secret Awaits...</h1>
            <p class="subtitle">Only for <span class="highlight">Anastasia</span></p>
            <p class="instruction">Are you ready for an adventure?</p>
            <button class="btn-primary pulse" onclick="startAdventure()">
                <span>Begin ğŸ’œ</span>
            </button>
            <div class="minigames-teaser">
                <p class="new-minigames-text">âœ¨ New minigames only for you âœ¨</p>
                <button class="btn-secondary minigames-btn" onclick="showStage('valentine-gate')">
                    <span>ğŸ® Play Minigames ğŸ’œ</span>
                </button>
            </div>
        </div>
    </section>

    <!-- STAGE 1: The Riddle -->
    <section id="stage-riddle" class="stage">
        <div class="stage-content">
            <div class="stage-icon">ğŸ”</div>
            <h2>Stage 1: The Secret Code</h2>
            <p class="riddle-text">"What number wins the biggest lottery of all?"</p>
            <div class="input-group">
                <input type="text" id="riddle-answer" placeholder="Enter the magic number..." maxlength="10"
                    autocomplete="off">
                <button class="btn-primary" onclick="checkRiddle()">Unlock ğŸ”“</button>
            </div>
            <p id="riddle-feedback" class="feedback"></p>
        </div>
    </section>

    <!-- STAGE 2: Memory Match -->
    <section id="stage-memory" class="stage">
        <div class="stage-content memory-content">
            <div class="stage-icon">ğŸƒ</div>
            <h2>Stage 2: Memory Match</h2>
            <p class="instruction">Find all matching pairs!</p>
            <div class="memory-grid" id="memory-grid">
                <!-- Cards generated by JS -->
            </div>
            <div class="match-counter">
                <span id="match-count">0</span> / 8 pairs
            </div>
            <div class="matched-display" id="matched-display">
                <!-- Matched pairs shown here -->
            </div>
        </div>
    </section>

    <!-- STAGE 3: Maze -->
    <section id="stage-maze" class="stage">
        <div class="stage-content maze-content">
            <div class="stage-icon">ğŸ§­</div>
            <h2>Stage 3: Find Your Way to Me</h2>
            <p class="instruction">Guide the heart from <span class="highlight">Patra</span> to <span
                    class="highlight">Filiatra</span>!</p>
            <div class="maze-container" id="maze-container">
                <div class="maze-start">PATRA</div>
                <canvas id="maze-canvas"></canvas>
                <div class="maze-end">FILIATRA</div>
            </div>
        </div>
    </section>

    <!-- STAGE 4: Catch Hearts -->
    <section id="stage-catch" class="stage">
        <div class="stage-content catch-content">
            <h2>Stage 4: Catch My Love!</h2>
            <p class="instruction">Tap the hearts before they fall!</p>
            <div class="catch-counter">
                <span id="catch-count">0</span> / 15 hearts
            </div>
            <div class="catch-area" id="catch-area">
                <!-- Hearts generated by JS -->
            </div>
        </div>
    </section>

    <!-- STAGE 5: Scavenger Hunt -->
    <section id="stage-hunt" class="stage">
        <div class="stage-content">
            <div class="stage-icon">ğŸ”</div>
            <h2>Stage 5: Find My Heart</h2>
            <p class="instruction">Find the <strong>3 things</strong> that remind me of you!</p>
            <div class="found-counter">
                <span id="found-count">0</span> / 3 found
            </div>
            <div class="hunt-grid" id="hunt-grid">
                <!-- Items will be generated by JS -->
            </div>
            <div class="collected-items" id="collected-items">
                <!-- Collected items appear here -->
            </div>
        </div>
    </section>

    <!-- STAGE 6: Drag the Key -->
    <section id="stage-drag" class="stage">
        <div class="stage-content drag-content">
            <div class="stage-icon">ğŸ—ï¸</div>
            <h2>Stage 6: Unlock My Heart</h2>
            <p class="instruction">Drag the key to the lock!</p>
            <div class="drag-area" id="drag-area">
                <div class="drag-key" id="drag-key">ğŸ—ï¸</div>
                <div class="drag-lock" id="drag-lock">ğŸ”’</div>
            </div>
        </div>
    </section>

    <!-- STAGE 7: Love Meter -->
    <section id="stage-meter" class="stage">
        <div class="stage-content">
            <div class="stage-icon">ğŸ’œ</div>
            <h2>Stage 7: Power Up My Heart!</h2>
            <p class="instruction">Tap rapidly to fill the love meter! ğŸ’œ</p>
            <div class="meter-container">
                <div class="meter-bar">
                    <div class="meter-fill" id="meter-fill"></div>
                </div>
                <span class="meter-percent" id="meter-percent">0%</span>
            </div>
            <div class="heart-button" id="heart-button" ontouchstart="pumpHeart(event)" onmousedown="pumpHeart(event)">
                <span>ğŸ’œ</span>
            </div>
            <p class="tap-instruction">TAP THE HEART!</p>
        </div>
    </section>

    <!-- STAGE 8: The Finale -->
    <section id="stage-finale" class="stage">
        <div class="stage-content finale-content">
            <div class="sparkles"></div>
            <div class="card">
                <div class="card-inner">
                    <h1 class="finale-title">Anastasia...</h1>
                    <p class="finale-text">Will you be my</p>
                    <h2 class="valentine-text">Valentine?</h2>
                    <div class="heart-decoration">ğŸ’œ</div>
                </div>
            </div>
            <div class="button-container">
                <button class="btn-yes" id="btn-yes" onclick="sayYes()">YES! ğŸ’œ</button>
                <button class="btn-no" id="btn-no">no</button>
            </div>
        </div>
    </section>

    <section id="stage-valentine-gate" class="stage">
        <div class="stage-content valentine-gate-content">
            <div class="gate-icon">â¤ï¸</div>
            <h2>One Question...</h2>
            <p class="gate-text">Before you play, I need to know one thing...</p>
            <p class="gate-question">Will you be my Valentine? ğŸŒ¹</p>

            <div class="gate-buttons">
                <button class="btn-yes" onclick="acceptValentine()">YES! ğŸ˜</button>
                <button class="btn-no" id="btn-no" onmouseover="moveNoButton()" ontouchstart="moveNoButton()">No
                    ğŸ˜¢</button>
            </div>

            <button class="btn-secondary" onclick="showStage('welcome')" style="margin-top: 30px;">â† Back</button>
        </div>
    </section>

    <!-- Minigames Menu -->
    <section id="stage-minigames-menu" class="stage">
        <div class="stage-content minigames-menu-content">
            <div class="stage-icon">ğŸ®</div>
            <h2>Minigames for You ğŸ’œ</h2>
            <p class="instruction">Pick a game to play!</p>
            <div class="minigames-grid">
                <button class="minigame-card" onclick="startMinigame('flappy')">
                    <span class="minigame-icon">ğŸ•Šï¸</span>
                    <span class="minigame-name">Flappy Heart</span>
                </button>
                <button class="minigame-card" onclick="startMinigame('snake')">
                    <span class="minigame-icon">ğŸ</span>
                    <span class="minigame-name">Love Snake</span>
                </button>
                <button class="minigame-card" onclick="startMinigame('runner')">
                    <span class="minigame-icon">ğŸƒ</span>
                    <span class="minigame-name">Love Run</span>
                </button>
                <button class="minigame-card" onclick="startMinigame('cupid-arrow')">
                    <span class="minigame-icon">ğŸ’˜</span>
                    <span class="minigame-name">Cupid's Arrow</span>
                </button>
                <button class="minigame-card" onclick="startMinigame('heart-collector')">
                    <span class="minigame-icon">ğŸ’</span>
                    <span class="minigame-name">Heart Collector</span>
                </button>
            </div>
            <button class="btn-secondary" onclick="showStage('welcome')">â† Back Home</button>
        </div>
    </section>

    <!-- NEW MINIGAME 1: Flappy Heart -->
    <section id="stage-flappy" class="stage">
        <div class="stage-content game-content">
            <div class="stage-icon">ğŸ•Šï¸</div>
            <h2>Flappy Heart</h2>
            <p class="instruction">Tap to fly! Don't hit the pipes!</p>
            <div class="game-score">
                Score: <span id="flappy-score">0</span>
            </div>
            <div class="canvas-container">
                <canvas id="flappy-canvas"></canvas>
                <div class="game-overlay" id="flappy-start">
                    <p>Tap to Start</p>
                </div>
            </div>
            <button class="btn-secondary" onclick="backToMinigames()">â† Back</button>
        </div>
    </section>

    <!-- NEW MINIGAME 2: Love Snake -->
    <section id="stage-snake" class="stage">
        <div class="stage-content game-content">
            <div class="stage-icon">ğŸ</div>
            <h2>Love Snake</h2>
            <p class="instruction">Swipe to consume love! Don't hit walls!</p>
            <div class="game-score">
                Score: <span id="snake-score">0</span>
            </div>
            <div class="canvas-container">
                <canvas id="snake-canvas"></canvas>
                <div class="game-controls">
                    <p class="swipe-hint">Swipe to Move</p>
                </div>
                <div class="game-overlay" id="snake-start" style="display: none;">
                    <p>Game Over<br>Tap to Try Again</p>
                </div>
            </div>
            <button class="btn-secondary" onclick="backToMinigames()">â† Back</button>
        </div>
    </section>

    <!-- NEW MINIGAME 3: Dino Love Run -->
    <section id="stage-runner" class="stage">
        <div class="stage-content game-content">
            <div class="stage-icon">ğŸƒ</div>
            <h2>Love Run</h2>
            <p class="instruction">Tap to jump over heartbreak!</p>
            <div class="game-score">
                Score: <span id="runner-score">0</span>
            </div>
            <div class="canvas-container">
                <canvas id="runner-canvas"></canvas>
                <div class="game-overlay" id="runner-start">
                    <p>Tap to Jump</p>
                </div>
            </div>
            <button class="btn-secondary" onclick="backToMinigames()">â† Back</button>
        </div>
    </section>

    <!-- MINIGAME 4: Cupid's Arrow (Kept) -->
    <section id="stage-cupid-arrow" class="stage">
        <div class="stage-content cupid-arrow-content">
            <div class="stage-icon">ğŸ’˜</div>
            <h2>Cupid's Arrow</h2>
            <p class="instruction">Tap hearts before they escape!</p>
            <div class="cupid-score">
                <span id="cupid-score">0</span> / 10 hearts
            </div>
            <div class="cupid-arena" id="cupid-arena">
                <!-- Hearts spawn here -->
            </div>
            <button class="btn-secondary" onclick="backToMinigames()">â† Back</button>
        </div>
    </section>

    <!-- MINIGAME 6: Heart Collector (Kept) -->
    <section id="stage-heart-collector" class="stage">
        <div class="stage-content collector-content">
            <div class="stage-icon">ğŸ’</div>
            <h2>Heart Collector</h2>
            <p class="instruction">Catch hearts! Avoid ğŸ’”!</p>
            <div class="collector-score">
                <span id="collector-score">0</span>
            </div>
            <div class="collector-arena" id="collector-arena">
                <div class="collector-basket" id="collector-basket">ğŸ§º</div>
                <!-- Hearts fall here -->
            </div>
            <button class="btn-secondary" onclick="backToMinigames()">â† Back</button>
        </div>
    </section>

    <!-- Minigame Win Overlay -->
    <div id="minigame-win" class="minigame-win hidden">
        <div class="minigame-win-content">
            <h1>ğŸ‰ You Won! ğŸ‰</h1>
            <p id="minigame-win-message">Amazing job!</p>
            <button class="btn-primary" onclick="hideMinigameWin()">Play More ğŸ’œ</button>
        </div>
    </div>

    <!-- Celebration Overlay -->
    <div id="celebration" class="celebration hidden">
        <div class="celebration-content">
            <h1>YAY! ğŸ‰ğŸ’œğŸ‰</h1>
            <p>I knew you'd say yes!</p>
            <p class="love-message">I love you, Anastasia! ğŸ’œ</p>
            <div class="floating-hearts" id="floating-hearts"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>