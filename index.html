<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ’œ A Special Message for Anastasia ğŸ’œ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@300;400;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="particles"></div>

    <!-- Progress Bar -->
    <div class="progress-container" id="progress-container">
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
        <span class="progress-text" id="progress-text">1/8</span>
    </div>

    <!-- STAGE 0: Welcome -->
    <section id="stage-welcome" class="stage active">
        <div class="stage-content">
            <div class="lock-icon">ğŸ”’</div>
            <h1>A Secret Awaits...</h1>
            <p class="subtitle">Only for <span class="highlight">Anastasia</span></p>
            <p class="instruction">Are you ready for an adventure?</p>
            <button class="btn-primary pulse" onclick="startAdventure()">
                <span>Begin ğŸ’œ</span>
            </button>
            <div class="minigames-teaser">
                <p class="new-minigames-text">âœ¨ New minigames only for you âœ¨</p>
                <button class="btn-secondary minigames-btn" onclick="showMinigamesMenu()">
                    <span>ğŸ® Play Minigames ğŸ’œ</span>
                </button>
            </div>
        </div>
    </section>

    <!-- STAGE 1: The Riddle -->
    <section id="stage-riddle" class="stage">
        <div class="stage-content">
            <div class="stage-icon">ğŸ”</div>
            <h2>Stage 1: The Secret Code</h2>
            <p class="riddle-text">"What number wins the biggest lottery of all?"</p>
            <div class="input-group">
                <input type="text" id="riddle-answer" placeholder="Enter the magic number..." maxlength="10"
                    autocomplete="off">
                <button class="btn-primary" onclick="checkRiddle()">Unlock ğŸ”“</button>
            </div>
            <p id="riddle-feedback" class="feedback"></p>
        </div>
    </section>

    <!-- STAGE 2: Memory Match -->
    <section id="stage-memory" class="stage">
        <div class="stage-content memory-content">
            <div class="stage-icon">ğŸƒ</div>
            <h2>Stage 2: Memory Match</h2>
            <p class="instruction">Find all matching pairs!</p>
            <div class="memory-grid" id="memory-grid">
                <!-- Cards generated by JS -->
            </div>
            <div class="match-counter">
                <span id="match-count">0</span> / 8 pairs
            </div>
            <div class="matched-display" id="matched-display">
                <!-- Matched pairs shown here -->
            </div>
        </div>
    </section>

    <!-- STAGE 3: Maze -->
    <section id="stage-maze" class="stage">
        <div class="stage-content maze-content">
            <div class="stage-icon">ğŸ§­</div>
            <h2>Stage 3: Find Your Way to Me</h2>
            <p class="instruction">Guide the heart from <span class="highlight">Patra</span> to <span
                    class="highlight">Filiatra</span>!</p>
            <div class="maze-container" id="maze-container">
                <div class="maze-start">PATRA</div>
                <canvas id="maze-canvas"></canvas>
                <div class="maze-end">FILIATRA</div>
            </div>
        </div>
    </section>

    <!-- STAGE 4: Catch Hearts -->
    <section id="stage-catch" class="stage">
        <div class="stage-content catch-content">
            <h2>Stage 4: Catch My Love!</h2>
            <p class="instruction">Tap the hearts before they fall!</p>
            <div class="catch-counter">
                <span id="catch-count">0</span> / 15 hearts
            </div>
            <div class="catch-area" id="catch-area">
                <!-- Hearts generated by JS -->
            </div>
        </div>
    </section>

    <!-- STAGE 5: Scavenger Hunt -->
    <section id="stage-hunt" class="stage">
        <div class="stage-content">
            <div class="stage-icon">ğŸ”</div>
            <h2>Stage 5: Find My Heart</h2>
            <p class="instruction">Find the <strong>3 things</strong> that remind me of you!</p>
            <div class="found-counter">
                <span id="found-count">0</span> / 3 found
            </div>
            <div class="hunt-grid" id="hunt-grid">
                <!-- Items will be generated by JS -->
            </div>
            <div class="collected-items" id="collected-items">
                <!-- Collected items appear here -->
            </div>
        </div>
    </section>

    <!-- STAGE 6: Drag the Key -->
    <section id="stage-drag" class="stage">
        <div class="stage-content drag-content">
            <div class="stage-icon">ğŸ—ï¸</div>
            <h2>Stage 6: Unlock My Heart</h2>
            <p class="instruction">Drag the key to the lock!</p>
            <div class="drag-area" id="drag-area">
                <div class="drag-key" id="drag-key">ğŸ—ï¸</div>
                <div class="drag-lock" id="drag-lock">ğŸ”’</div>
            </div>
        </div>
    </section>

    <!-- STAGE 7: Love Meter -->
    <section id="stage-meter" class="stage">
        <div class="stage-content">
            <div class="stage-icon">ğŸ’œ</div>
            <h2>Stage 7: Power Up My Heart!</h2>
            <p class="instruction">Tap rapidly to fill the love meter! ğŸ’œ</p>
            <div class="meter-container">
                <div class="meter-bar">
                    <div class="meter-fill" id="meter-fill"></div>
                </div>
                <span class="meter-percent" id="meter-percent">0%</span>
            </div>
            <div class="heart-button" id="heart-button" ontouchstart="pumpHeart(event)" onmousedown="pumpHeart(event)">
                <span>ğŸ’œ</span>
            </div>
            <p class="tap-instruction">TAP THE HEART!</p>
        </div>
    </section>

    <!-- STAGE 8: The Finale -->
    <section id="stage-finale" class="stage">
        <div class="stage-content finale-content">
            <div class="sparkles"></div>
            <div class="card">
                <div class="card-inner">
                    <h1 class="finale-title">Anastasia...</h1>
                    <p class="finale-text">Will you be my</p>
                    <h2 class="valentine-text">Valentine?</h2>
                    <div class="heart-decoration">ğŸ’œ</div>
                </div>
            </div>
            <div class="button-container">
                <button class="btn-yes" id="btn-yes" onclick="sayYes()">YES! ğŸ’œ</button>
                <button class="btn-no" id="btn-no">no</button>
            </div>
        </div>
    </section>

    <!-- Minigames Menu -->
    <section id="stage-minigames-menu" class="stage">
        <div class="stage-content minigames-menu-content">
            <div class="stage-icon">ğŸ®</div>
            <h2>Minigames for You ğŸ’œ</h2>
            <p class="instruction">Pick a game to play!</p>
            <div class="minigames-grid">
                <button class="minigame-card" onclick="startMinigame('love-letter')">
                    <span class="minigame-icon">ğŸ’•</span>
                    <span class="minigame-name">Love Letter</span>
                </button>
                <button class="minigame-card" onclick="startMinigame('cupid-arrow')">
                    <span class="minigame-icon">ğŸ’˜</span>
                    <span class="minigame-name">Cupid's Arrow</span>
                </button>
                <button class="minigame-card" onclick="startMinigame('heartbeat')">
                    <span class="minigame-icon">ğŸµ</span>
                    <span class="minigame-name">Heartbeat</span>
                </button>
                <button class="minigame-card" onclick="startMinigame('heart-collector')">
                    <span class="minigame-icon">ğŸ’</span>
                    <span class="minigame-name">Heart Collector</span>
                </button>
                <button class="minigame-card" onclick="startMinigame('bubble-pop')">
                    <span class="minigame-icon">ğŸŒ¹</span>
                    <span class="minigame-name">Bubble Pop</span>
                </button>
                <button class="minigame-card" onclick="startMinigame('connect-hearts')">
                    <span class="minigame-icon">ğŸ’«</span>
                    <span class="minigame-name">Connect Hearts</span>
                </button>
            </div>
            <button class="btn-secondary" onclick="showStage('welcome')">â† Back Home</button>
        </div>
    </section>

    <!-- MINIGAME 1: Love Letter Puzzle -->
    <section id="stage-love-letter" class="stage">
        <div class="stage-content love-letter-content">
            <div class="stage-icon">ğŸ’•</div>
            <h2>Love Letter Puzzle</h2>
            <p class="instruction">Arrange the words to form a love message!</p>
            <div class="love-letter-display" id="love-letter-display">
                <!-- Answer slots -->
            </div>
            <div class="love-letter-words" id="love-letter-words">
                <!-- Scrambled words -->
            </div>
            <button class="btn-secondary" onclick="backToMinigames()">â† Back</button>
        </div>
    </section>

    <!-- MINIGAME 2: Cupid's Arrow -->
    <section id="stage-cupid-arrow" class="stage">
        <div class="stage-content cupid-arrow-content">
            <div class="stage-icon">ğŸ’˜</div>
            <h2>Cupid's Arrow</h2>
            <p class="instruction">Tap hearts before they escape!</p>
            <div class="cupid-score">
                <span id="cupid-score">0</span> / 10 hearts
            </div>
            <div class="cupid-arena" id="cupid-arena">
                <!-- Hearts spawn here -->
            </div>
            <button class="btn-secondary" onclick="backToMinigames()">â† Back</button>
        </div>
    </section>

    <!-- MINIGAME 3: Heartbeat Rhythm -->
    <section id="stage-heartbeat" class="stage">
        <div class="stage-content heartbeat-content">
            <div class="stage-icon">ğŸµ</div>
            <h2>Heartbeat Rhythm</h2>
            <p class="instruction">Tap when hearts reach the zone!</p>
            <div class="rhythm-score">
                Perfect: <span id="rhythm-perfect">0</span> |
                Good: <span id="rhythm-good">0</span>
            </div>
            <div class="rhythm-track" id="rhythm-track">
                <div class="rhythm-zone"></div>
                <!-- Hearts fall here -->
            </div>
            <div class="rhythm-tap-area" id="rhythm-tap-area">TAP!</div>
            <button class="btn-secondary" onclick="backToMinigames()">â† Back</button>
        </div>
    </section>

    <!-- MINIGAME 4: Heart Collector -->
    <section id="stage-heart-collector" class="stage">
        <div class="stage-content collector-content">
            <div class="stage-icon">ğŸ’</div>
            <h2>Heart Collector</h2>
            <p class="instruction">Move the basket to catch hearts!</p>
            <div class="collector-score">
                <span id="collector-score">0</span> / 20 hearts
            </div>
            <div class="collector-arena" id="collector-arena">
                <div class="collector-basket" id="collector-basket">ğŸ§º</div>
                <!-- Hearts fall here -->
            </div>
            <button class="btn-secondary" onclick="backToMinigames()">â† Back</button>
        </div>
    </section>

    <!-- MINIGAME 5: Love Bubble Pop -->
    <section id="stage-bubble-pop" class="stage">
        <div class="stage-content bubble-content">
            <div class="stage-icon">ğŸŒ¹</div>
            <h2>Love Bubble Pop</h2>
            <p class="instruction">Pop bubbles in order: smallest â†’ largest heart!</p>
            <div class="bubble-sequence">
                Next: <span id="bubble-next">ğŸ’—</span>
            </div>
            <div class="bubble-arena" id="bubble-arena">
                <!-- Bubbles spawn here -->
            </div>
            <button class="btn-secondary" onclick="backToMinigames()">â† Back</button>
        </div>
    </section>

    <!-- MINIGAME 6: Connect Hearts -->
    <section id="stage-connect-hearts" class="stage">
        <div class="stage-content connect-content">
            <div class="stage-icon">ğŸ’«</div>
            <h2>Connect Hearts</h2>
            <p class="instruction">Tap matching hearts to connect them!</p>
            <div class="connect-score">
                <span id="connect-score">0</span> / 4 pairs
            </div>
            <div class="connect-arena" id="connect-arena">
                <!-- Heart pairs here -->
            </div>
            <button class="btn-secondary" onclick="backToMinigames()">â† Back</button>
        </div>
    </section>

    <!-- Minigame Win Overlay -->
    <div id="minigame-win" class="minigame-win hidden">
        <div class="minigame-win-content">
            <h1>ğŸ‰ You Won! ğŸ‰</h1>
            <p id="minigame-win-message">Amazing job!</p>
            <button class="btn-primary" onclick="hideMinigameWin()">Play More ğŸ’œ</button>
        </div>
    </div>

    <!-- Celebration Overlay -->
    <div id="celebration" class="celebration hidden">
        <div class="celebration-content">
            <h1>YAY! ğŸ‰ğŸ’œğŸ‰</h1>
            <p>I knew you'd say yes!</p>
            <p class="love-message">I love you, Anastasia! ğŸ’œ</p>
            <div class="floating-hearts" id="floating-hearts"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>